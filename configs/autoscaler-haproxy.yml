global
  log stdout format raw local0
  # Disabilita persistenza server-state (o reindirizza su /run/haproxy/)
  # server-state-file /run/haproxy/server-state

defaults
  mode tcp
  log global
  option dontlognull
  timeout connect 5s
  timeout client 30s
  timeout server 30s

frontend dockerfrontend
  bind 0.0.0.0:2375
  default_backend docker

backend docker
  # verso il socket Docker via unix domain socket
  # richiede supporto "unix@" (HAProxy) e mount del socket in ro
  server dockersocket unix@/var/run/docker.sock

backend docker-events
  # timeouts espliciti per evitare warning
  timeout connect 5s
  timeout client 30s
  timeout server 30s
  server dockersocket unix@/var/run/docker.sock
